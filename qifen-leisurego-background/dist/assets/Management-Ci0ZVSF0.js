import{H as b,_ as $,r as p,fi as h,c as j,e,w as t,a as w,k as c,fj as E,t as A,y as z,g as F,j as K,E as _,fq as q,f as u}from"./index-DQbwl3Hd.js";import{p as H}from"./PageContainer-C64bxy9F.js";const I=({status:r,sensitive:o,pageNum:i,pageSize:m})=>b.post("/api/bg/manage/list",{status:r,sensitive:o,pageNum:i,pageSize:m}),L=({sensitive:r})=>b.post("/api/bg/manage/addSensitive",{sensitive:r}),P=r=>b.post(`/api/bg/manage/delete/${r}`),G={class:"container"},J={class:"dialog-footer"},O={__name:"Management",setup(r){const o=p([]),i=p(!1),m=p({status:"",sensitive:"",pageNum:1,pageSize:11}),g=async()=>{i.value=!0;const{data:s}=await I(m.value);i.value=!1,o.value=s.data};g();const C=s=>{m.value.pageNum=s,g()},x=s=>{m.value.pageSize=s,g()},n=p({sensitive:""}),v=p(!1),y=async()=>{if(n.value.sensitive===""){_({type:"error",message:"请输入违禁词"}),n.value.sensitive="";return}if(n.value.sensitive.includes("陈")||n.value.sensitive.includes("灿")||n.value.sensitive.includes("荣")||n.value.sensitive.includes("ccr")){_({type:"error",message:"该词禁止添加"}),n.value.sensitive="";return}i.value=!0,await L(n.value),i.value=!1,v.value=!1,g(),n.value.sensitive=""};p(!1);const k=async s=>{const l=s.id;q.confirm("确定删除该违禁词？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{i.value=!0,await P(l),i.value=!1,g(),_({type:"success",message:"删除成功！"})}).catch(()=>{_({type:"info",message:"已取消删除"})})};return(s,l)=>{const f=u("el-button"),d=u("el-table-column"),V=u("el-tag"),S=u("el-table"),B=u("el-pagination"),M=u("el-input"),N=u("el-form-item"),D=u("el-form"),T=u("el-dialog"),U=h("loading");return w(),j("div",G,[e(H,{title:"违禁词管理"},{extra:t(()=>[e(f,{type:"primary",onClick:l[0]||(l[0]=a=>v.value=!0)},{default:t(()=>[c("添加违禁词")]),_:1})]),default:t(()=>[E((w(),A(S,{data:o.value.list,style:{width:"100%"},size:"large"},{default:t(()=>[e(d,{label:"编号"},{default:t(a=>[c(z(a.$index+1),1)]),_:1}),e(d,{prop:"sensitive",label:"关键字"}),e(d,{prop:"createTime",label:"创建日期"}),e(d,{prop:"createUser",label:"发布人"}),e(d,{label:"状态"},{default:t(a=>[e(V,{type:a.row.status===0?"success":"danger"},{default:t(()=>[c(z(a.row.status===0?"已启用":"已禁用"),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"操作",align:"right"},{default:t(a=>[e(f,{type:"danger",size:"small",onClick:Q=>k(a.row)},{default:t(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[U,i.value]]),e(B,{"current-page":o.value.pageNum,"onUpdate:currentPage":l[1]||(l[1]=a=>o.value.pageNum=a),"page-size":o.value.pageSize,"onUpdate:pageSize":l[2]||(l[2]=a=>o.value.pageSize=a),"page-sizes":[3,5,7,9,11,13,15],small:s.small,disabled:s.disabled,background:!0,layout:"jumper,total, sizes, prev, pager, next ",total:o.value.total,onSizeChange:x,onCurrentChange:C,"default-page-size":11,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","small","disabled","total"]),e(T,{modelValue:v.value,"onUpdate:modelValue":l[5]||(l[5]=a=>v.value=a),title:"添加违禁词",width:"500",draggable:""},{footer:t(()=>[F("div",J,[e(f,{type:"primary",onClick:y},{default:t(()=>[c("确定")]),_:1}),e(f,{onClick:l[4]||(l[4]=a=>v.value=!1)},{default:t(()=>[c(" 取消 ")]),_:1})])]),default:t(()=>[e(D,{ref:"form",model:n.value,"label-width":"80px"},{default:t(()=>[e(N,{label:"违禁词"},{default:t(()=>[e(M,{modelValue:n.value.sensitive,"onUpdate:modelValue":l[3]||(l[3]=a=>n.value.sensitive=a),onKeyup:K(y,["enter"])},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})])}}},X=$(O,[["__scopeId","data-v-7840be3f"]]);export{X as default};
